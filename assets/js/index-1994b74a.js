import{n as W,a as o,y as A,P as c,o as I,p as z,b as p,j as f,S as L,R as b,B as R,e as T,W as U,C as F}from"./main-7307f41e.js";import{r as i,a as d,L as G}from"./chartjs-607bc94d.js";import{j as H}from"./vectormaps-c2c8c25d.js";import{C as m}from"./Card-a6ae249e.js";import"./apexcharts-de833af9.js";const M=i.forwardRef(({bsPrefix:e,size:r,vertical:t=!1,className:n,role:a="group",as:s="div",...l},h)=>{const g=W(e,"btn-group");let y=g;return t&&(y=`${g}-vertical`),o(s,{...l,ref:h,role:a,className:A(n,y,r&&`${g}-${r}`)})});M.displayName="ButtonGroup";const V=M;function S(){return S=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},S.apply(this,arguments)}function Y(e,r){if(e==null)return{};var t=q(e,r),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function q(e,r){if(e==null)return{};var t={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}var P=i.forwardRef(function(e,r){var t=e.color,n=t===void 0?"currentColor":t,a=e.size,s=a===void 0?24:a,l=Y(e,["color","size"]);return d.createElement("svg",S({ref:r,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),d.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),d.createElement("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}))});P.propTypes={color:c.string,size:c.oneOfType([c.string,c.number])};P.displayName="DollarSign";const J=P;function N(){return N=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},N.apply(this,arguments)}function K(e,r){if(e==null)return{};var t=Q(e,r),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function Q(e,r){if(e==null)return{};var t={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}var $=i.forwardRef(function(e,r){var t=e.color,n=t===void 0?"currentColor":t,a=e.size,s=a===void 0?24:a,l=K(e,["color","size"]);return d.createElement("svg",N({ref:r,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),d.createElement("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}),d.createElement("path",{d:"M13 13l6 6"}))});$.propTypes={color:c.string,size:c.oneOfType([c.string,c.number])};$.displayName="MousePointer";const X=$;function j(){return j=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},j.apply(this,arguments)}function Z(e,r){if(e==null)return{};var t=ee(e,r),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function ee(e,r){if(e==null)return{};var t={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}var E=i.forwardRef(function(e,r){var t=e.color,n=t===void 0?"currentColor":t,a=e.size,s=a===void 0?24:a,l=Z(e,["color","size"]);return d.createElement("svg",j({ref:r,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),d.createElement("circle",{cx:"11",cy:"11",r:"8"}),d.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}))});E.propTypes={color:c.string,size:c.oneOfType([c.string,c.number])};E.displayName="Search";const re=E;function C(){return C=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},C.apply(this,arguments)}function te(e,r){if(e==null)return{};var t=ne(e,r),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function ne(e,r){if(e==null)return{};var t={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}var _=i.forwardRef(function(e,r){var t=e.color,n=t===void 0?"currentColor":t,a=e.size,s=a===void 0?24:a,l=te(e,["color","size"]);return d.createElement("svg",C({ref:r,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),d.createElement("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),d.createElement("polyline",{points:"17 6 23 6 23 12"}))});_.propTypes={color:c.string,size:c.oneOfType([c.string,c.number])};_.displayName="TrendingUp";const ae=_,se=({url:e,name:r,tooltipName:t,idName:n})=>{const a=I(),[s,l]=i.useState(!1),[h,g]=i.useState([]),[y,k]=i.useState(!0),x=i.useRef(null);let v=null;return i.useEffect(()=>{setTimeout(async()=>{const u=await z(e);u.success&&g(u.results[0]),l(!0),k(!1)},100)},[e]),i.useEffect(()=>{const u=()=>{s&&v&&v.updateSize()};return window.addEventListener("resize",u),()=>{window.removeEventListener("resize",u)}},[s,v]),i.useEffect(()=>{s&&x.current&&(v=new H({visualizeData:{normalizeFunction:"polynomial",scale:["#9d9da6","#885434"],values:h},onRegionTooltipShow(u,w,D){w.text(w.text()+" ("+t+": "+(h[D]?h[D]:0)+")")},selector:"#"+n,map:"world",regionStyle:{initial:{fill:a["gray-200"]}},backgroundColor:"transparent",zoomOnScroll:!1}))},[s,a]),o(p,{children:f(m,{className:"",children:[o(m.Header,{children:o(m.Title,{className:"mb-0",children:r})}),o(m.Body,{className:"p-2",children:o("div",{className:"map-container",style:{height:351},ref:x,children:y?o("div",{className:"text-center",children:o("div",{className:"mb-3",children:o(L,{animation:"border",variant:"primary",className:"me-2"})})}):o("div",{id:n})})})]})})},oe=({isLoading:e,data:r,needSecondY:t,xName:n,yName:a,y1Name:s})=>{const l={maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0},filler:{propagate:!1}},scales:{x:{reverse:!0,grid:{color:"rgba(0,0,0,0.05)"},...n?{title:{display:!0,text:n}}:{}},y:{display:!0,borderDash:[5,5],grid:{color:"rgba(0,0,0,0)",backgroundColor:"rgba(0,0,0,0)",fontColor:"#fff"},...a?{title:{display:!0,text:a}}:{}},...t?{y1:{display:!0,borderDash:[5,5],grid:{color:"rgba(0,0,0,0)",backgroundColor:"rgba(0,0,0,0)",fontColor:"#fff"},position:"right",...s?{title:{display:!0,text:s}}:{}}}:{}}};return o("div",{className:"chart",children:e?o("div",{className:"text-center",children:o("div",{className:"mb-3",children:o(L,{animation:"border",variant:"primary",className:"me-2"})})}):o(G,{data:r,options:l})})},ie=({url:e,activeTab:r})=>{const t=I(),[n,a]=i.useState(!0),[s,l]=i.useState({labels:[],datasets:[{label:"Total Searches",backgroundColor:t["primary-dark"],borderColor:t["primary-dark"],data:[],yAxisID:"y"},{label:"Monetized Searches",backgroundColor:t["primary-light"],borderColor:t["primary-light"],data:[],yAxisID:"y"},{label:r&&r==="revenue"?"Revenue ($)":"Clicks",backgroundColor:r&&r==="revenue"?"#4bbf73":"#f0ad4e",borderColor:r&&r==="revenue"?"#4bbf73":"#f0ad4e",data:[],yAxisID:"y1"}]});return i.useEffect(()=>{setTimeout(async()=>{const h=await z(e);let g=[],y=[],k=[],x=[],v=[];h.success&&(h.results[0].forEach((u,w)=>{g.push(u.date),y.push(u.total_searches),k.push(u.monetized_searches),r&&r==="revenue"&&x.push(u.revenue),r&&r==="clicks"&&v.push(u.clicks)}),l({labels:g,datasets:[{label:"Total Searches",backgroundColor:t["primary-dark"],borderColor:t["primary-dark"],data:y,yAxisID:"y"},{label:"Monetized Searches",backgroundColor:t["primary-light"],borderColor:t["primary-light"],data:k,yAxisID:"y"},{label:r&&r==="revenue"?"Revenue ($)":"Clicks",backgroundColor:r&&r==="revenue"?"#4bbf73":"#f0ad4e",borderColor:r&&r==="revenue"?"#4bbf73":"#f0ad4e",data:r&&r==="revenue"?x:v,yAxisID:"y1"}]})),a(!1)},100)},[r,t,e]),o(oe,{data:s,isLoading:n,needSecondY:!0,yName:"Searches",y1Name:r&&r==="revenue"?"Revenue ($)":"Clicks"})},le=()=>{const[e,r]=i.useState("revenue");return f(m,{children:[o(m.Header,{children:o(b,{children:o(p,{xs:"auto",className:"text-start",children:o(m.Title,{children:"Last 30 days Searches by Revenue/Clicks"})})})}),f(m.Body,{style:{paddingTop:0},children:[o(b,{children:o(p,{xs:"auto",className:"text-start mb-2",children:f(V,{children:[o(R,{variant:"outline-primary",onClick:()=>r("revenue"),className:e==="revenue"?"active":"",children:"Revenue"}),o(R,{variant:"outline-primary",onClick:()=>r("clicks"),className:e==="clicks"?"active":"",children:"Clicks"})]})})}),o(b,{children:o(ie,{activeTab:e,url:"/api/publisher/dashboard/get/chart/last_30_days"})})]})]})},O=({value:e,isLoading:r,name:t,icon:n,isMoney:a,periodName:s})=>o(m,{className:"flex-fill",children:f(m.Body,{children:[f(b,{children:[o(p,{className:"mt-0",children:o("h5",{className:"card-title",children:t})}),o(p,{xs:"auto",children:o("div",{className:"stat stat-sm",children:n()})})]}),r?o("div",{className:"mb-2",children:o(L,{animation:"border",variant:"primary",className:"me-2"})}):o("span",{className:"h1 d-inline-block mt-1 mb-4",children:a?e.toLocaleString("en-US",{minimumFractionDigits:2,style:"currency",currency:"USD"}):Number(e).toLocaleString("en-US",{minimumFractionDigits:0})}),!!s&&o("div",{className:"mb-0",children:o(T,{bg:"",className:"badge-soft-success me-2",children:o("span",{className:"text-muted",children:s})})})]})}),B=({url:e,period:r})=>{const[t,n]=i.useState(!0),[a,s]=i.useState({total_searches:0,monetized_searches:0,clicks:0,revenue:0});return i.useEffect(()=>{setTimeout(async()=>{const l=await z(e);l.success&&(s(l.results),n(!1))},100)},[e]),f(b,{children:[o(p,{sm:"3",className:"d-flex",children:o(O,{icon:()=>o(re,{className:"align-middle text-success"}),name:"Total Searches",value:a.total_searches,periodName:r,isLoading:t})}),o(p,{sm:"3",className:"d-flex",children:o(O,{icon:()=>o(ae,{className:"align-middle text-success"}),name:"Monetized Searches",value:a.monetized_searches,periodName:r,isLoading:t})}),o(p,{sm:"3",className:"d-flex",children:o(O,{icon:()=>o(X,{className:"align-middle text-success"}),name:"Clicks",value:a.clicks,periodName:r,isLoading:t})}),o(p,{sm:"3",className:"d-flex",children:o(O,{icon:()=>o(J,{className:"align-middle text-success"}),name:"Revenue",isMoney:!0,value:a.revenue,periodName:r,isLoading:t})})]})},fe=()=>f(d.Fragment,{children:[o(U,{title:"Dashboard"}),f(F,{fluid:!0,className:"p-0",children:[o(B,{url:"/api/publisher/dashboard/get/all/this_month",period:"Month to Date"}),o(B,{url:"/api/publisher/dashboard/get/all/last_month",period:"Last Month"}),f(b,{children:[o(p,{sm:"6",children:o(se,{name:"Total Searches by GEO",url:"/api/publisher/dashboard/get/geo/last_30_days",tooltipName:"Total Searches",idName:"total_search_map"})}),o(p,{sm:"6",children:o(le,{})})]})]})]});export{fe as default};
